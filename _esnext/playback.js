(()=>{var E=e=>{throw new Error(e)},c=e=>a=>e??E(a);var d=e=>localStorage.getItem(e);var i=e=>c(document.querySelector(e))(`Selector ${e} not found.`);var n=(...e)=>a=>e.reduce((o,s)=>s(o),a);var r=e=>a=>Object.getOwnPropertyNames(e).reduce((o,s)=>(Object.defineProperty(o,s,Object.getOwnPropertyDescriptor(e,s)),o),a);var t=e=>a=>(e(a),a);var y;addEventListener("DOMContentLoaded",()=>{let e={defaultPlaystate:"pause",audio:i("audio"),seekSlider:i("#seek-slider"),duration:i("#duration"),currentTime:i("#current-time"),musicPlayer:i("#music-player")};T(e),addEventListener("keydown",n(r(e),t(f(" ")),t(m),t(l))),addEventListener("touchstart",n(r(e),t(v),t(m),t(l))),e.audio.addEventListener("loadedmetadata",n(r(e),t(P),t(M),t(g))),e.audio.addEventListener("progress",n(r(e),t(g),t(p))),e.seekSlider.addEventListener("input",n(r(e),t(x),t(p),t(L))),e.seekSlider.addEventListener("change",n(r(e),t(h),t(l)))});var T=e=>localStorage.setItem("audioplaystate",e.defaultPlaystate),f=e=>a=>d("audioplaystate")==="pause"?a.key===e&&localStorage.setItem("audioplaystate","play"):a.key===e&&localStorage.setItem("audioplaystate","pause"),v=e=>d("audioplaystate")==="pause"?e.type==="touchstart"&&localStorage.setItem("audioplaystate","play"):e.type==="touchstart"&&localStorage.setItem("audioplaystate","pause"),m=e=>e.audio[d("audioplaystate")??e.defaultPlaystate](),x=e=>e.musicPlayer.style.setProperty("--seek-before-width",e.seekSlider.value/e.seekSlider.max*100+"%"),u=e=>{let a=Math.floor(e/60),o=Math.floor(e%60),s=o<10?`0${o}`:`${o}`;return`${a}:${s}`},P=e=>e.duration.textContent=u(e.audio.duration),p=e=>e.currentTime.textContent=u(e.seekSlider.value),M=e=>e.seekSlider.max=Math.floor(e.audio.duration),g=e=>{let a=e.audio.buffered.length?Math.floor(e.audio.buffered.end(e.audio.buffered.length-1)):0;e.musicPlayer.style.setProperty("--buffered-width",`${a/e.seekSlider.max*100}%`)},S=e=>()=>{e.seekSlider.value=Math.floor(e.audio.currentTime),e.currentTime.textContent=u(e.seekSlider.value),e.musicPlayer.style.setProperty("--seek-before-width",`${e.seekSlider.value/e.seekSlider.max*100}%`),y=requestAnimationFrame(S(e))},h=e=>e.audio.currentTime=e.seekSlider.value,L=e=>!e.audio.paused&&cancelAnimationFrame(y??0),l=e=>!e.audio.paused&&requestAnimationFrame(S(e));})();
