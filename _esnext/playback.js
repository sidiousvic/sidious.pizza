(()=>{var h=t=>{throw new Error(t)},E=t=>o=>t??h(o);var u=t=>localStorage.getItem(t);var l=t=>E(document.querySelector(t))(`Selector ${t} not found.`);var r=(...t)=>o=>t.reduce((i,n)=>n(i),o);var s=t=>o=>Object.getOwnPropertyNames(t).reduce((i,n)=>(Object.defineProperty(i,n,Object.getOwnPropertyDescriptor(t,n)),i),o);var a=t=>o=>(t(o),o);var T;addEventListener("DOMContentLoaded",()=>{let t={defaultPlaystate:"pause",audio:l("audio"),seekSlider:l("#seek-slider"),duration:l("#duration"),currentTime:l("#current-time"),musicPlayer:l("#music-player")},o=e=>d=>u("audioplaystate")==="pause"?d.key===e&&localStorage.setItem("audioplaystate","play"):d.key===e&&localStorage.setItem("audioplaystate","pause"),i=e=>u("audioplaystate")==="pause"?e.type==="touchstart"&&localStorage.setItem("audioplaystate","play"):e.type==="touchstart"&&localStorage.setItem("audioplaystate","pause"),n=e=>e.audio[u("audioplaystate")??e.defaultPlaystate](),f=e=>e.musicPlayer.style.setProperty("--seek-before-width",e.seekSlider.value/e.seekSlider.max*100+"%"),c=e=>{let d=Math.floor(e/60),p=Math.floor(e%60),L=p<10?`0${p}`:`${p}`;return`${d}:${L}`},v=e=>e.duration.textContent=c(e.audio.duration),g=e=>e.currentTime.textContent=c(e.seekSlider.value),x=e=>e.seekSlider.max=Math.floor(e.audio.duration),y=e=>{let d=e.audio.buffered.length?Math.floor(e.audio.buffered.end(e.audio.buffered.length-1)):0;e.musicPlayer.style.setProperty("--buffered-width",`${d/e.seekSlider.max*100}%`)},S=e=>()=>{e.seekSlider.value=Math.floor(e.audio.currentTime),e.currentTime.textContent=c(e.seekSlider.value),e.musicPlayer.style.setProperty("--seek-before-width",`${e.seekSlider.value/e.seekSlider.max*100}%`),T=requestAnimationFrame(S(e))},P=e=>e.audio.currentTime=e.seekSlider.value,M=e=>!e.audio.paused&&cancelAnimationFrame(T??0),m=e=>!e.audio.paused&&requestAnimationFrame(S(e));addEventListener("keydown",r(s(t),a(o(" ")),a(n),a(m))),addEventListener("touchstart",r(s(t),a(i),a(n),a(m))),t.audio.addEventListener("loadedmetadata",r(s(t),a(v),a(x),a(y))),t.audio.addEventListener("progress",r(s(t),a(y),a(g))),t.seekSlider.addEventListener("input",r(s(t),a(f),a(g),a(M))),t.seekSlider.addEventListener("change",r(s(t),a(P),a(m)))});})();
